\chapter{Увод}
\label{ch:introduction}

\section{Мотивация}

Изискванията към софтуерните системи се увеличават непрекъснато. В последните години броят на хората с достъп до Интернет е надминал три милиарда, а устройствата, които са онлайн, са над 16 милиарда и се увеличават експоненциално~\cite{evans2011TheIoT}. Все по-голяма популярност добива терминът \englishterm{Internet of Things} — включването на най-различни устройства от нашето ежедневие в Интернет с цел да използват неговите услуги. Според различни прогнози се очаква през 2020-та година броят на тези устройства да достигне между 25 и 50 милиарда~\cite{evans2011TheIoT, gartner2013IoTGrowth}. Същевременно потребителите очакват от Интернет услугите да отговарят бързо и да работят във всеки един момент безгрешно. От все повече от тях се изискват сложни обработки, често на големи масиви от данни, и работа в близко до реално време. Поради всичко това софтуерните системи трябва да могат да поемат големи натоварвания от потребители — в това число както реални хора така и свързаните в Интернет устройства, в пъти по-големи от преди години.

Популярните в днешно време архитектури, от своя страна, често са монолитни и тежки, проектиране във времена на далеч по-малко натоварване и базирани на програмен модел, при който всичко се изпълнява синхронно и последователно, разчитащ силно на строга консистентност на данните. Базираните на тези архитектури системи не успяват да оползотворят добре ресурсите на машините, върху които се изпълняват, и скалират трудно, както вертикално върху станалите преобладаващи многоядрени машини, така и хоризонтално върху няколко такива. Често неочаквани грешки или голямо натоварване успяват да съборят голяма част от една такава система и да я направят за дълго време недостъпна за всички потребители. Типичен пример е така нареченият \englishterm{Slashdot effect}, при който уеб сайтове стават недостъпни след рязко покачване на трафика към тях след като са били популяризирани в по-голям сайт.

Необходими са различни архитектури и технологии за проектиране и реализиране на такива системи, които, при тези условия, да успяват да скалират линейно, да могат да реагират на повишаващ се трафик адекватно, според наличните им ресурси, и да бъдат устойчиви в силно нестабилната разпределена среда. Заедно с това е необходим и програмен модел, който да предоставя подходящи абстракции от по-високо ниво за улесняване на програмирането при сложността, породена от тези архитектури.

\section{Цели и задачи}

Целта на тази дипломна работа е да представи принципите на реактивното и функционалното програмиране, да разгледа връзките между тях и да покаже как чрез тях може да се изградят скалируеми и устойчиви софтуерни системи в съвременната натоварена Интернет среда.

От това произтичат следните задачи:
\begin{itemize*}
  \item Разглеждане на основните проблеми пред вертикалната и хоризонталната скалируемост;
  \item Описание на характеристиките на разпределените системи и усложнената среда, която те носят. Представяне на \englishterm{CAP} теоремата и нуждата от намаляване на нивото на консистентност на данните;
  \item Разглеждане на популярните монолитни архитектури и техния програмен модел, по какъв начин в тях се изразяват горните проблеми и защо е трудно да бъдат разпределени;
  \item Анализ на принципите на реактивното програмиране и по какъв начин чрез тях тези проблеми мога да бъдат решени;
  \item Представяне на функционалното програмиране и средствата, които то предоставя за създаване на преизползваеми абстракции от високо ниво и тяхното композиране;
  \item Разглеждане и сравнение на технологии и подходи за изграждане на реактивни системи. Това включва:
  \begin{itemize*}
    \item анализ на кои реактивни принципи те подпомагат и по какъв начин;
    \item описание на начините за реализацията им и как чрез тях се постигат принципите;
    \item описание за това как те се вписват в абстракциите на функционалното програмиране и как това подпомага разработката;
    \item изграждане на връзки между различните технологии и функционалните абстракции;
  \end{itemize*}
  \item Представяне на примерна архитектура за средно голямо реактивно уеб приложение.
  \item Проектиране и реализиране на изцяло реактивно уеб-базирано софтуерно приложение чрез предложената архитектура, използвайки подходящ набор от разгледаните реактивни средства и техни реализации и спазвайки реактивните принципи. То трябва да може да скалира линейно в зависимост от натоварването на системата и трябва да бъде устойчиво на грешки и натоварване.
  \item Разглеждане на подходи за тестване на отделните компоненти на приложението:
  \begin{itemize*}
    \item модулно и интеграционно тестване на локални компоненти;
    \item начини за тестване на компоненти в симулирана разпределена среда;
  \end{itemize*}
  \item Внедряване на приложението и разглеждане на особеностите при внедряването на реактивните системи и подходи за автоматично скалиране в съвременните облачни решения.
\end{itemize*}

\section{Очаквани ползи. Реализации}

В тази дипломна работа ще анализираме дълбоко основните причини за проблеми пред скалируемостта и устойчивостта и ще видим анализи и подходи, както на различни софтуерни и хардуерни нива, така и на концептуално ниво. Ще видим как всичко това се съчетава с принципите на реактивното и функционалното програмиране, което ще ни позволи да разгледаме конкретни средства, постигащи скалируемост и устойчивост, които и да реализираме. Чрез тези средства ще можем да реализираме сложни и разнообразни архитектури и конкретни системи за разнообразната и растяща Интернет среда,

Към всичко това, разглежданите системи ще могат да използват много по-ефективно своите ресурси, изисквайки по-малко изчислителна мощ, което и \emph{помага силно за ограничение на влиянието върху околната среда.}

Като конкретни примери ще разгледаме архитектура за средно големи приложения и конкретна реактивна реализация чрез нея, с което реално да тестваме възможностите на тези системи.

\section{Структура}

Изложението в дипломната работа е структурирано по следния начин:

\labeledref{Глава}{ch:reactive-programming-principles} представя реактивното програмиране. Паралелно се разглеждат трудностите за постигане на скалируемост и устойчивост в разпределена среда върху съвременни машини. Излагат се реактивните принципи и основните начини, по които те се справят с тези трудности. Прави се сравнение с популярните монолитни системи.

\labeledref{Глава}{ch:functional-programming} представя начини за изграждане на преизползваеми абстракции чрез функционалното програмиране. Разглежда важни принципи, които значително улесняват програмирането на разпределени системи.

\labeledref{Глава}{ch:reactive-tools} разглежда различни реактивни инструменти, като шаблоните реактор и проактор, \englishterm{future} и \englishterm{promise}, актьорски модел, потоци и др. Главата разглежда и начините за реализация на инструментите, като за някои предоставя и имплементация, разглежда връзките между тях и ги представя в различни примери, като изграждане на уеб сървър.

\labeledref{Глава}{ch:reactive-architecture} разглежда примерна архитектура на неголямо реактивно приложение. Разглежда се различен модел на данните, базиран на \englishterm{Command-Query Responsibility Segregation} и \englishterm{event sourcing}, с който лесно може да се постигне евентуална консистентност и скалируемост. Разглеждат си особеностите на един актьорски клъстер и начините за постигане на принципите на реактивното програмиране в него.

\labeledref{Глава}{ch:implementing-a-reactive-application} използва разгледаната архитектура за да представи как може да бъде реализирано едно реактивно приложение. Чрез два прости примера се комбинира практически разгледаното в предишните глави.
