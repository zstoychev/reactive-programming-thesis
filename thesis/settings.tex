\usepackage{amsthm}
\usepackage{amssymb}
\usepackage[vmargin=1in, hmargin=1.20in]{geometry}
\usepackage{titling}
\usepackage{fontspec}
\usepackage{polyglossia}
\usepackage{fancyhdr}
\usepackage{lipsum}
\usepackage[backend=bibtex, style=numeric, sorting=none, language=british]{biblatex}
\usepackage[hidelinks=true, linktoc=all]{hyperref}
\usepackage{mdwlist}
\usepackage{listings}
\usepackage{color}
\usepackage{pgf-umlcd}
\usepackage{threeparttable}
\usepackage{tocbibind}

\setmainfont[Ligatures=TeX]{Liberation Serif}
\setsansfont{Liberation Sans}
\setmonofont{Liberation Mono}

\setmainlanguage{bulgarian}
\setotherlanguage{english}

\PolyglossiaSetup{bulgarian}{indentfirst=true}

\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\rfoot{\thepage}
\fancypagestyle{plain}{%
  \renewcommand{\headrulewidth}{0pt}
  \fancyhf{}
  \rfoot{\thepage}
}

\addbibresource{references.bib}

\lstdefinelanguage{Scala}{
  morekeywords={%
    abstract,case,catch,class,def,do,else,extends,%
    false,final,finally,for,forSome,if,implicit,import,lazy,%
    match,new,null,object,override,package,private,protected,%
    return,sealed,super,this,throw,trait,true,try,type,%
    val,var,while,with,yield},
  otherkeywords={=>,<-,<\%,<:,>:,\#,@},
  sensitive=true,
  morecomment=[l]{//},
  morecomment=[n]{/*}{*/},
  morestring=[b]",
  morestring=[b]',
  morestring=[b]"""
}[keywords,comments,strings]

\definecolor{normal}{rgb}{0.1, 0.1, 0.1}
\definecolor{strings}{rgb}{0.4, 0, 0}
\definecolor{comments}{rgb}{0.21, 0.425, 0.3}
\definecolor{keywords}{rgb}{0, 0, 0}
\definecolor{javadoc}{rgb}{0.25, 0.35, 0.75}

\lstset{
  language=Scala,
  basicstyle=\ttfamily\fontsize{9}{10.8}\selectfont\color{normal},
  keywordstyle=\color{keywords}\bfseries,
  stringstyle=\color{strings},
  commentstyle=\color{comments},
  morecomment=[s][\color{javadoc}]{/**}{*/},
  tabsize=2,
  showspaces=false,
  showstringspaces=false,
  breaklines=true,
  prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
}

\lstdefinestyle{listing}{
  numbers=left,
  numbersep=6pt,
  numberstyle=\tiny
}

\renewcommand{\lstlistingname}{Листинг}
\renewcommand{\lstlistlistingname}{Списък на листингите}

\theoremstyle{definition}
\newtheorem*{definition}{Дефиниция}

\renewcommand{\umltextcolor}{black}
\renewcommand{\umlfillcolor}{white}
\renewcommand{\umldrawcolor}{black}

\sloppy
